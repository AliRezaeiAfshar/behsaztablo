<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced React Methodologies - Professional Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .code-block { background: #1e293b; color: #10b981; font-family: monospace; border-radius: 8px; }
    </style>
</head>
<body class="bg-gray-50">
    <header class="gradient-bg text-white py-12">
        <div class="container mx-auto px-6">
            <h1 class="text-4xl font-bold mb-3">Advanced React Methodologies</h1>
            <p class="text-lg opacity-90">Professional Techniques for Complex Enterprise Applications</p>
        </div>
    </header>

    <div class="container mx-auto px-6 py-8">
        <!-- Micro-Frontend Architecture -->
        <section class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-blue-800">Micro-Frontend Architecture</h2>
            <div class="grid lg:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-semibold mb-3">Module Federation (Webpack 5)</h3>
                    <div class="code-block p-3 text-sm">
                        <pre>
// Advanced Module Federation Setup
const ModuleFederationPlugin = require('@module-federation/webpack');

module.exports = {
  plugins: [
    new ModuleFederationPlugin({
      name: 'shell',
      remotes: {
        userMfe: 'userMfe@http://localhost:3001/remoteEntry.js'
      },
      shared: {
        react: { singleton: true, strictVersion: true },
        'react-dom': { singleton: true }
      }
    })
  ]
};

// Dynamic remote loading with fallbacks
const loadRemoteComponent = (remoteName, componentName) => {
  return React.lazy(async () => {
    try {
      const container = window[remoteName];
      await container.init(__webpack_share_scopes__.default);
      const factory = await container.get(componentName);
      return factory();
    } catch (error) {
      return { default: () => &lt;RemoteErrorFallback /&gt; };
    }
  });
};
                        </pre>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-3">Cross-MFE Communication</h3>
                    <div class="code-block p-3 text-sm">
                        <pre>
// Event-driven communication bus
class MicroFrontendBus {
  constructor() {
    this.events = new Map();
  }
  
  emit(event, payload, options = {}) {
    const listeners = this.events.get(event) || [];
    listeners.forEach(listener => {
      if (options.targetMfe && listener.mfe !== options.targetMfe) return;
      listener.callback(payload);
    });
  }
  
  subscribe(event, callback, mfe) {
    if (!this.events.has(event)) {
      this.events.set(event, []);
    }
    this.events.get(event).push({ callback, mfe });
  }
}

// React hook for MFE communication
const useMfeCommunication = (mfeName) => {
  const bus = useContext(MfeBusContext);
  
  const emit = useCallback((event, payload, target) => {
    bus.emit(event, payload, { source: mfeName, targetMfe: target });
  }, [bus, mfeName]);
  
  return { emit, subscribe: bus.subscribe.bind(bus) };
};
                        </pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Advanced State Management -->
        <section class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-green-800">Advanced State Management</h2>
            <div class="grid lg:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-semibold mb-3">Finite State Machines (XState)</h3>
                    <div class="code-block p-3 text-sm">
                        <pre>
import { createMachine, assign } from 'xstate';

// Complex authentication state machine
const authMachine = createMachine({
  id: 'auth',
  initial: 'checkingAuth',
  context: { user: null, retryCount: 0 },
  states: {
    checkingAuth: {
      invoke: {
        src: 'checkAuthStatus',
        onDone: [
          { target: 'authenticated', cond: 'isValid' },
          { target: 'unauthenticated' }
        ]
      }
    },
    authenticated: {
      type: 'parallel',
      states: {
        user: {
          initial: 'idle',
          states: {
            idle: {},
            refreshing: {
              invoke: {
                src: 'refreshToken',
                onDone: 'idle',
                onError: '#auth.unauthenticated'
              }
            }
          }
        }
      }
    },
    unauthenticated: {
      on: { LOGIN: 'authenticating' }
    }
  }
});
                        </pre>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-3">Event Sourcing Pattern</h3>
                    <div class="code-block p-3 text-sm">
                        <pre>
// Event sourcing store implementation
class EventSourcingStore {
  constructor() {
    this.events = [];
    this.projections = new Map();
  }
  
  dispatch(command) {
    const events = this.commandHandler(command);
    
    events.forEach(event => {
      this.events.push({
        ...event,
        id: generateId(),
        timestamp: Date.now(),
        version: this.events.length + 1
      });
      this.updateProjections(event);
    });
    
    return events;
  }
  
  replayEvents(fromVersion = 0) {
    const events = this.events.filter(e => e.version > fromVersion);
    this.projections.clear();
    events.forEach(event => this.updateProjections(event));
  }
  
  createProjection(name, reducer, initialState = {}) {
    this.projections.set(name, { state: initialState, reducer });
  }
}

// React integration
const useEventSourcingState = (projectionName) => {
  const store = useContext(EventStoreContext);
  const [state, setState] = useState(store.getProjection(projectionName));
  
  useEffect(() => {
    return store.subscribe(projectionName, setState);
  }, [store, projectionName]);
  
  return [state, store.dispatch.bind(store)];
};
                        </pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Advanced Component Patterns -->
        <section class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-purple-800">Advanced Component Patterns</h2>
            <div class="grid lg:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-semibold mb-3">Proxy Components</h3>
                    <div class="code-block p-3 text-sm">
                        <pre>
// Intelligent component proxy with cross-cutting concerns
function createComponentProxy(Component, config = {}) {
  return function ProxyComponent(props) {
    const [renderMetrics, setRenderMetrics] = useState(null);
    const performanceRef = useRef();
    
    // Performance monitoring
    useLayoutEffect(() => {
      if (config.withPerformance) {
        performanceRef.current = performance.now();
      }
    });
    
    useEffect(() => {
      if (config.withPerformance && performanceRef.current) {
        const renderTime = performance.now() - performanceRef.current;
        setRenderMetrics({ renderTime, component: Component.name });
        
        if (renderTime > 16) {
          console.warn(`Slow render: ${Component.name} (${renderTime}ms)`);
        }
      }
    });
    
    // Analytics tracking
    useEffect(() => {
      if (config.withAnalytics) {
        window.analytics?.track('component_render', {
          component: Component.name,
          renderTime: renderMetrics?.renderTime
        });
      }
    }, [renderMetrics]);
    
    return config.withErrorBoundary ? (
      &lt;ErrorBoundary&gt;
        &lt;Component {...props} /&gt;
      &lt;/ErrorBoundary&gt;
    ) : (
      &lt;Component {...props} /&gt;
    );
  };
}
                        </pre>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-3">Advanced Compound Components</h3>
                    <div class="code-block p-3 text-sm">
                        <pre>
// Self-registering compound components
function createCompoundComponent(config) {
  const Context = createContext();
  
  const Root = ({ children, ...props }) => {
    const [state, dispatch] = useReducer(config.reducer, config.initialState);
    const api = useMemo(() => ({
      state,
      dispatch,
      ...config.actions(dispatch, state)
    }), [state]);
    
    return (
      &lt;Context.Provider value={api}&gt;
        &lt;div {...props}&gt;{children}&lt;/div&gt;
      &lt;/Context.Provider&gt;
    );
  };
  
  // Auto-generate compound components
  Object.entries(config.components).forEach(([name, component]) => {
    Root[name] = (props) => {
      const context = useContext(Context);
      if (!context) {
        throw new Error(`${name} must be used within ${Root.displayName}`);
      }
      return component(props, context);
    };
  });
  
  return Root;
}

// Usage
const DataTable = createCompoundComponent({
  initialState: { data: [], sortBy: null, selectedRows: new Set() },
  reducer: (state, action) => {
    switch (action.type) {
      case 'SORT':
        return { ...state, sortBy: action.payload };
      default:
        return state;
    }
  },
  actions: (dispatch) => ({
    sort: (column) => dispatch({ type: 'SORT', payload: column })
  }),
  components: {
    Header: ({ children }, { sort }) => &lt;thead&gt;{children}&lt;/thead&gt;,
    Body: ({ children }, { state }) => &lt;tbody&gt;{children}&lt;/tbody&gt;
  }
});
                        </pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Advanced Testing -->
        <section class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-red-800">Advanced Testing Methodologies</h2>
            <div class="grid lg:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-semibold mb-3">Property-Based Testing</h3>
                    <div class="code-block p-3 text-sm">
                        <pre>
import fc from 'fast-check';

// Property-based testing for React components
describe('Component Invariants', () => {
  test('UserCard handles any valid user object', () => {
    fc.assert(fc.property(
      fc.record({
        id: fc.integer({ min: 1 }),
        name: fc.string({ minLength: 1, maxLength: 100 }),
        email: fc.emailAddress(),
        age: fc.integer({ min: 0, max: 150 })
      }),
      (user) => {
        const { getByText } = render(&lt;UserCard user={user} /&gt;);
        
        // Invariants that should always hold
        expect(getByText(user.name)).toBeInTheDocument();
        expect(getByText(user.email)).toBeInTheDocument();
      }
    ), { numRuns: 100 });
  });
  
  // Model-based testing for state machines
  test('Form state machine properties', () => {
    const commands = [
      fc.record({ type: fc.constant('SUBMIT') }),
      fc.record({ type: fc.constant('RESET') })
    ];
    
    fc.assert(fc.property(
      fc.array(fc.oneof(...commands)),
      (commandList) => {
        const { result } = renderHook(() => useFormMachine());
        
        commandList.forEach(command => {
          act(() => result.current.send(command));
          
          // Invariant: form should always be in valid state
          expect(['idle', 'editing', 'submitting', 'success', 'error'])
            .toContain(result.current.state.value);
        });
      }
    ));
  });
});
                        </pre>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-3">Advanced MSW Patterns</h3>
                    <div class="code-block p-3 text-sm">
                        <pre>
// Scenario-based API mocking
class APIScenarioManager {
  constructor() {
    this.scenarios = new Map();
    this.currentScenario = 'default';
  }
  
  addScenario(name, handlers) {
    this.scenarios.set(name, handlers);
  }
  
  setScenario(name) {
    this.currentScenario = name;
    const handlers = this.scenarios.get(name);
    if (handlers) server.resetHandlers(...handlers);
  }
}

const scenarioManager = new APIScenarioManager();

// Define scenarios
scenarioManager.addScenario('loading-error', [
  rest.get('/api/users', (req, res, ctx) => {
    return res(ctx.delay(1000), ctx.status(500));
  })
]);

scenarioManager.addScenario('empty-state', [
  rest.get('/api/users', (req, res, ctx) => {
    return res(ctx.json({ users: [], total: 0 }));
  })
]);

// Usage in tests
describe('UserList scenarios', () => {
  test('handles loading errors', async () => {
    scenarioManager.setScenario('loading-error');
    render(&lt;UserList /&gt;);
    
    await waitFor(() => {
      expect(screen.getByText(/error loading/i)).toBeInTheDocument();
    });
  });
});
                        </pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- Professional Tools -->
        <section class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-4 text-indigo-800">Professional Development Stack</h2>
            <div class="grid md:grid-cols-4 gap-4">
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h3 class="font-bold mb-2 text-blue-800">Build Tools</h3>
                    <ul class="text-sm text-blue-700 space-y-1">
                        <li><strong>Vite:</strong> Lightning-fast dev server</li>
                        <li><strong>esbuild:</strong> Extremely fast bundler</li>
                        <li><strong>SWC:</strong> Rust-based compiler</li>
                        <li><strong>Turborepo:</strong> High-performance monorepos</li>
                    </ul>
                </div>
                
                <div class="bg-green-50 p-4 rounded-lg">
                    <h3 class="font-bold mb-2 text-green-800">State Management</h3>
                    <ul class="text-sm text-green-700 space-y-1">
                        <li><strong>Jotai:</strong> Atomic state management</li>
                        <li><strong>Valtio:</strong> Proxy-based mutations</li>
                        <li><strong>XState:</strong> Finite state machines</li>
                        <li><strong>Zustand:</strong> Lightweight state library</li>
                    </ul>
                </div>
                
                <div class="bg-purple-50 p-4 rounded-lg">
                    <h3 class="font-bold mb-2 text-purple-800">Testing Stack</h3>
                    <ul class="text-sm text-purple-700 space-y-1">
                        <li><strong>Playwright:</strong> E2E testing</li>
                        <li><strong>MSW:</strong> API mocking</li>
                        <li><strong>fast-check:</strong> Property-based testing</li>
                        <li><strong>Storybook:</strong> Component development</li>
                    </ul>
                </div>
                
                <div class="bg-orange-50 p-4 rounded-lg">
                    <h3 class="font-bold mb-2 text-orange-800">Observability</h3>
                    <ul class="text-sm text-orange-700 space-y-1">
                        <li><strong>Sentry:</strong> Error tracking</li>
                        <li><strong>LogRocket:</strong> Session replay</li>
                        <li><strong>DataDog:</strong> Performance monitoring</li>
                        <li><strong>Lighthouse CI:</strong> Automated audits</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Advanced Patterns Summary -->
        <section class="bg-gradient-to-r from-gray-800 to-gray-900 text-white rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4">Key Professional Patterns</h2>
            <div class="grid md:grid-cols-3 gap-6">
                <div>
                    <h3 class="font-semibold mb-2 text-blue-300">Architecture Patterns</h3>
                    <ul class="text-sm space-y-1 opacity-90">
                        <li>• Module Federation for micro-frontends</li>
                        <li>• Domain-driven design structure</li>
                        <li>• Hexagonal architecture principles</li>
                        <li>• Event sourcing for complex state</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold mb-2 text-green-300">Component Patterns</h3>
                    <ul class="text-sm space-y-1 opacity-90">
                        <li>• Proxy components for cross-cutting concerns</li>
                        <li>• Advanced compound components</li>
                        <li>• Render props with inversion of control</li>
                        <li>• Higher-order component factories</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold mb-2 text-purple-300">Testing Strategies</h3>
                    <ul class="text-sm space-y-1 opacity-90">
                        <li>• Property-based testing for invariants</li>
                        <li>• Model-based testing for state machines</li>
                        <li>• Contract testing with Pact.js</li>
                        <li>• Visual regression testing</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>
</body>
</html>